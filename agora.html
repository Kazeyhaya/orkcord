<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agora - Comunidades e Chat</title>
  
  <link rel="stylesheet" href="/assets/style.css">
  <link rel="icon" type="image/png" href="/assets/Agora-logo.png"> 
  <meta name="color-scheme" content="dark">
</head>
<body>

  <div class="login-overlay" id="login-view" hidden>
    <form class="login-card" id="login-form">
      <div class="brand-badge" style="margin-bottom: 12px; background: none;">
          <img src="/assets/Agora-logo.png" alt="Agora Logo">
      </div>
      <h2>Bem-vindo ao Agora</h2>
      <p class="meta" style="margin-bottom: 15px;">Digite um nome de usu√°rio para entrar.</p>
      
      <input class="input" id="login-username-input" placeholder="Seu nome de usu√°rio..." required style="width: 100%; text-align: center;">
      
      <button class="send" type="submit" style="width: 100%; margin-top: 10px;">Entrar</button>
    </form>
  </div>

  <div class="modal-overlay" id="input-modal" hidden>
    <form class="modal-card" id="modal-form">
      <h3 id="modal-title" style="margin-bottom: 15px;">T√≠tulo do Modal</h3>
      <textarea class="input" id="modal-input" required style="width: 100%; min-height: 80px;"></textarea>
      <div style="display: flex; gap: 10px; width: 100%; margin-top: 10px;">
        <button class="mini-btn" type="button" id="modal-cancel-btn" style="flex: 1;">Cancelar</button>
        <button class="send" type="submit" id="modal-save-btn" style="flex: 2;">Salvar</button>
      </div>
    </form>
  </div>


  <div class="app" hidden>
    <aside class="servers" aria-label="Comunidades">
      <div id="home-btn" class="server active" title="Agora">
        <img src="/assets/Agora-logo.png" alt="Agora Home" style="width: 100%; height: 100%; object-fit: contain;">
      </div>
      
      <div class="divider"></div>
      <div id="joined-servers-list"></div>
      <div class="divider"></div>
      
      <button class="add-btn" id="explore-servers-btn" title="Explorar Comunidades">+</button>
    </aside>

    <header class="header" role="banner">
      
      <button class="icon-btn" id="btn-mobile-menu" title="Menu">‚ò∞</button>
      
      <div class="brand" aria-label="Agora" id="header-home-btn">
        <div class="brand-badge">A</div>
        <div class="brand-title">Agora</div>
      </div>
      <div class="header-actions">
        <div class="view-tabs">
          <button class="pill active" data-view="feed">Feed</button>
        </div>
        <button class="pill" id="btn-explore">Explorar</button>
      </div>
    </header>

    <aside class="channels" aria-label="Canais" hidden>
      <div class="community-card">
        <div class="avatar-display community-avatar" id="community-avatar-channel">AG</div>
        
        <div class="community-info">
          <div class="community-name" id="community-name-channel">Nome da Comunidade</div>
          <div class="community-sub" id="community-members-count">0 membros</div>
        </div>
      </div>
      
      <div class="view-tabs" style="padding-left: 10px; margin-top: 10px;">
          <button class="pill active" data-community-view="topics">T√≥picos</button>
          <button class="pill" data-community-view="members">Membros</button> 
      </div>
      
    </aside>

    <section class="feed" id="view-feed">
      <div class="feed-top">
        <div class="chat-topic"><div class="topic-badge">Agora Feed</div><span class="meta">‚Äî Posts de quem voc√™ segue</span></div>
        <div class="chat-actions"><button class="icon-btn" id="btn-refresh">üîÑ</button></div>
      </div>
      <div class="composer-feed">
        <input class="input" id="feedInput" type="text" placeholder="Compartilhe algo..." />
        <button class="send" id="feedSend">Publicar</button>
      </div>
      <div class="posts" id="posts">
      </div>
    </section>

    <main class="chat" aria-live="polite" id="view-chat" hidden>
      <div class="chat-top">
        <div class="chat-topic"><div class="topic-badge" id="topic">@ Utilizador</div><span class="meta">‚Äî Mensagem Direta</span></div>
        <div class="chat-actions">
          <button class="icon-btn" title="Pesquisar" id="btn-search">üîé</button>
        </div>
      </div>
      <div class="messages" id="messages" role="log">
      </div>
      <div class="composer">
        <input class="input" id="composerInput" type="text" placeholder="Envie uma mensagem..." autocomplete="off" aria-label="Mensagem">
        <button class="send" id="sendBtn">Enviar</button>
      </div>
    </main>
    
    <section class="profile" id="view-profile" hidden>
      <div class="profile-top"><div class="chat-topic"><div class="topic-badge">Perfil</div><span class="meta">‚Äî Seu perfil social</span></div></div>
      <div class="profile-body">
        
        <div class="card">
          <div class="avatar-display profile-avatar" id="profileAvatar" style="width:64px;height:64px;border-radius:16px;margin-bottom:8px">VC</div>
          <label class="mini-btn" for="avatar-upload-input" id="avatar-upload-label" style="display: none; margin-bottom: 8px; justify-content: center;">
            Mudar Foto
          </label>
          <input type="file" id="avatar-upload-input" accept="image/*" hidden>
          
          <div><strong id="profileName">Voc√™</strong></div>
          <div class="meta" id="profileBio">Apaixonado por comunidades e bate-papo.</div>
          <div class="meta" id="profileMood" style="color:var(--orkut-pink); margin-top: 4px;"></div>

          <div style="margin-top:10px;display:flex;gap:8px">
            <button class="mini-btn" id="editBioBtn">Editar bio</button>
            <button class="mini-btn" id="dmBtn" style="display: none;">Mensagem</button>
          </div>
          
          <div id="ratings-vote-container" hidden style="margin-top: 10px;">
            <div class="meta" style="margin-bottom: 5px;">Avalie este usu√°rio:</div>
            <div style="display: flex; gap: 8px;">
                <button class="mini-btn" data-rating="confiavel">üòä Confi√°vel</button>
                <button class="mini-btn" data-rating="legal">üßä Legal</button>
                <button class="mini-btn" data-rating="divertido">ü•≥ Divertido</button>
            </div>
          </div>
          </div>
        
        <div class="card">
          <h3 style="margin-bottom:8px">Avalia√ß√µes</h3>
          <div class="ratings-display" id="ratings-display-container">
            <div class="meta">Ainda n√£o h√° avalia√ß√µes.</div>
          </div>
          <h3 style="margin:12px 0 8px">Depoimentos</h3>
          <div id="testimonials" class="comments"></div>
          
          <div style="display:flex;gap:8px;margin-top:10px" id="testimonial-form-container">
            <input class="input" id="testimonialInput" placeholder="Escreva um depoimento..." />
            <button class="send" id="testimonialSend">Adicionar</button>
          </div>
          
          <h3 style="margin:12px 0 8px">Amigos</h3>
          <div class="friends" id="friends">
          </div>
        </div>
      </div>
    </section>

    <section class="feed" id="view-explore" hidden>
      <div class="feed-top">
        <div class="chat-topic"><div class="topic-badge">Explorar</div><span class="meta">‚Äî Todos os posts da rede</span></div>
        <div class="chat-actions"><button class="icon-btn" id="btn-explore-refresh">üîÑ</button></div>
      </div>
      <div class="posts" id="explore-posts">
      </div>
    </section>

    <section class="explore-servers" id="view-explore-servers" hidden>
      <div class="explore-servers-top">
        <h2>Explorar Comunidades</h2>
        <button class="mini-btn" id="btn-show-create-community">Criar a Minha</button>
        <p class="meta">Entre em comunidades p√∫blicas e fa√ßa novos amigos</p>
      </div>
      <div class="community-list" id="community-list-container">
      </div>
    </section>

    <section class="create-community" id="view-create-community" hidden>
      <div class="explore-servers-top">
            <h2>Criar Nova Comunidade</h2>
        </div>
        <div class="profile-body" style="grid-template-columns: 1fr;">
            <div class="card" style="max-width: 600px;">
                <form id="create-community-form">
                    <label for="community-name">Nome da Comunidade:</label>
                    <input class="input" id="community-name" type="text" required placeholder="Ex: Clube de Programa√ß√£o">
                    
                    <label for="community-emoji" style="margin-top: 10px;">Emoji/√çcone (Ex: üíª):</label>
                    <input class="input" id="community-emoji" type="text" placeholder="Opcional. Ex: üåü">
                    
                    <button class="send" type="submit" style="margin-top: 15px;">Criar e Entrar</button>
                    <button type="button" class="mini-btn" id="btn-cancel-create" style="margin-left: 10px;">Cancelar</button>
                </form>
            </div>
        </div>
    </section>
    
    <section class="community-content" id="view-community-topics" hidden>
      <div class="feed-top">
            <div class="chat-topic"><div class="topic-badge" id="current-community-name">Nome Com.</div><span class="meta">‚Äî F√≥rum de T√≥picos (Posts)</span></div>
            <div class="chat-actions"><button class="mini-btn" id="btn-new-topic">Novo T√≥pico</button></div>
        </div>
        <div class="posts" id="community-topic-list">
        </div>
    </section>
    
    <section class="community-content profile-body" id="view-community-members" hidden style="grid-template-columns: 1fr;">
      <div class="explore-servers-top" style="border-bottom: none;">
            <h2 id="community-members-title">Membros da Comunidade</h2>
        </div>
        <div class="card">
            <div class="friends" id="community-member-list">
            </div>
        </div>
    </section>
    
    <section class="create-topic" id="view-create-topic" hidden>
       <div class="explore-servers-top">
            <h2>Criar Novo T√≥pico</h2>
        </div>
        <div class="profile-body" style="grid-template-columns: 1fr;">
            <div class="card" style="max-width: 800px;">
                <form id="create-topic-form">
                    <label for="topic-title">T√≠tulo do T√≥pico:</label>
                    <input class="input" id="topic-title" type="text" required placeholder="Ex: Qual a vossa m√∫sica favorita?">
                    
                    <label for="topic-content" style="margin-top: 10px;">Conte√∫do:</label>
                    <textarea class="input" id="topic-content" required placeholder="Escreva a sua mensagem..." style="min-height: 150px;"></textarea>
                    
                    <button class="send" type="submit" style="margin-top: 15px;">Publicar T√≥pico</button>
                    <button type="button" class="mini-btn" id="btn-cancel-topic" style="margin-left: 10px;">Cancelar</button>
                </form>
            </div>
        </div>
    </section>


    <footer class="userbar" role="contentinfo">
      <div class="me clickable" id="userbar-me">
        <div class="avatar-display userbar-avatar" id="userAvatar">VC</div>
        
        <div>
          <div id="userName"><strong id="userName">Voc√™</strong> <span class="meta">@orklover</span></div>
          <div class="meta clickable" id="userbar-mood-container" title="Clique para mudar o seu mood">
            Mood: <span id="userbar-mood" style="color:var(--orkut-pink)">‚ù§ feliz</span>
          </div>
        </div>
      </div>
      <div class="user-actions">
        <div class="presence" title="online"></div>
        <button class="icon-btn" title="Configura√ß√µes">‚öôÔ∏è</button>
        <button class="icon-btn" title="Sair">üö™</button>
      </div>
    </footer>
  </div>

  <script src="/socket.io/socket.io.js" defer></script>
  <script src="/assets/script.js" defer></script>
  
</body>
</html>